:root{
  --bg:#0e1116; --panel:#161a22; --muted:#8892a6; --text:#e6edf3;
  --accent:#2f81f7; --danger:#f85149; --border:#263041;
}
*{box-sizing:border-box}
html,body{margin:0;height:100%;background:var(--bg);color:var(--text);font:14px/1.3 system-ui,Segoe UI,Roboto,Arial}
button,input,select,textarea{background:#111725;border:1px solid var(--border);color:var(--text);padding:6px 8px;border-radius:6px}
button{cursor:pointer}
button:hover{border-color:var(--accent)}
button.danger{background:#1a0f12;border-color:#4b1b20;color:#ffb3b3}
button.tiny{padding:3px 6px;font-size:12px}
.upload-btn span{display:inline-block;padding:6px 8px;border:1px solid var(--border);border-radius:6px}
.topbar{display:flex;gap:8px;align-items:center;padding:8px 12px;background:var(--panel);border-bottom:1px solid var(--border);position:sticky;top:0;z-index:10}
.layout{display:grid;grid-template-columns:260px 1fr 300px;gap:12px;padding:12px}
.sidebar .box{margin-bottom:12px}
.box{background:var(--panel);border:1px solid var(--border);border-radius:10px;overflow:hidden}
.box-title{padding:8px 10px;border-bottom:1px solid var(--border);font-weight:600}
.list{max-height:320px;overflow:auto;margin:0;padding:6px 0;list-style:none}
.list li{display:flex;gap:6px;align-items:center;padding:4px 8px;border-bottom:1px dashed #1f2635}
.list li:last-child{border-bottom:0}
.list .name{flex:1;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}
.list .btns{display:flex;gap:6px}
.stage-wrap{display:flex;flex-direction:column;gap:8px}
.stage-title{color:var(--muted)}
.stage{position:relative;background:#0b0f15;border:1px solid var(--border);border-radius:10px;height:560px;overflow:auto;padding:12px}
.surface{position:relative;width:1920px;height:1080px;background:#0b0f15;border:1px solid #202a3d;margin:auto;transform-origin:0 0}
.node{position:absolute;border:1px dashed #37507c;border-radius:8px;padding:6px;max-width:1920px;max-height:1080px}
.node.selected{outline:2px solid var(--accent)}
.node.text{color:#fff;text-shadow:0 2px 4px rgba(0,0,0,.6)}
.right .form{padding:10px}
.form label{display:block;margin:6px 0}
.form .grid2{display:grid;grid-template-columns:1fr 1fr;gap:8px}
.form .row{display:flex;gap:8px;margin-top:8px}
textarea{resize:vertical}
